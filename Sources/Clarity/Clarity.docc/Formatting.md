# Formatting

The model used by the non public structure `FormattingManagerService` to decode JSON data from the `Formatting` JSON file in the ClarityJSON folder.

## Overview

``Clarity`` provides a range of formatting options that can be edited to customise the console output generated by print statements. These are accessed from the `Formatting` JSON file.

The model matches the structure of the JSON exactly and is accessed directly by the framework.

Note that the name of the JSON file is abbreviated from FormattingManagerService to Formatting for convenience.

### Keys and descriptions: top level JSON object
| Key             | Type        | Description                                                  |
| --------------- | ----------- | ------------------------------------------------------------ |
| outcome_symbols | JSON object | A JSON object that contains key value pairs for the outcome symbols associated with control flow nodes, reporter and error nodes. |

An outcome symbol is embedded in the outcome column of the first line of a print statement output between the node number and the event description. 

Note that the outcome symbol also includes error or other ‚Äòreporter‚Äô symbols.

| Key                           | Type        | Description                                                  |
| ----------------------------- | ----------- | ------------------------------------------------------------ |
| controlflow_node_type_symbols | JSON object | A JSON object that contains key value pairs for the <doc:Node-type> symbols associated with control flow, reporter and error nodes. |

A control flow node type symbol is embedded in the control flow node-type column of the first line of a print statement output between the function number and the node number. This column groups node types regardless of outcome and can also include error or ‚Äòreporter‚Äô symbols .

Important: Although `controlflow_node_type_symbols` keys can be assigned to a string of any length it must be the same length for all keys. For readability it is recommended to assign a single character for the symbol.

Note that an exclamation mark will be automatically inserted directly before the control flow node type symbol if the <doc:Node-type> is the converse clause of another node (if else ), the catch block of a do-catch statement or the else clause of a guard statement. The exclamation mark currently acts as an additional visual cue but also serves as the partial implementation of a future feature where nodes in converse clauses can be optionally represented by a single node number.

| Key                   | Type        | Description                                                  |
| --------------------- | ----------- | ------------------------------------------------------------ |
| function_type_symbols | JSON object | A JSON object that contains key value pairs for the symbols associated with the <doc:Function-type> of a function name <doc:Node-type>. |

A function ‚Äòtype‚Äô symbol is embedded as the first character in the function-type column after the entity code of a function name print statement output. A character equal to the value assigned to <doc:Function-type> as specified in its associated <doc:EntityLogService> JSON file will be automatically inserted directly after the function ‚Äòtype‚Äô symbol.

Note that ‚Äòtype‚Äô does not refer to the defined Swift type for the function but to a grouping based on general task area.

The purpose of grouping functions according to general task area is to provide an additional visual cue that can make it easier to identify anomalies or unexpected paths taken in the control flow. The list of function groups available provides a range of possibilities and is not intended to be exhaustive or the representation of an ideal demarcation.


| Key     | Type        | Description                                                  |
| ------- | ----------- | ------------------------------------------------------------ |
| spacers | JSON object | A JSON object that contains key value pairs for custom spacer values. |

Custom spacers are used to add additional space as required between column blocks in the console according to screen width and developer preference. 

The default value is zero (space characters) and the key value has no upper limit. One integer is equivalent to one character space in the console.

The custom spacers are positioned within each console message line as follows:

- `spacer1` is positioned before the entity code.
- `spacer2` is positioned between the function symbol group and the function number.
- `spacer3` is positioned between the function number and function name or node symbol group.
- `spacer4` is positioned between the node symbol group and the outcome symbol.

All print statement output is adjusted so that columns align regardless of content, <doc:Node-type> or output line type. 


#### Keys and default values: outcome_symbols

| Key                                | Type   | Default value |
| ---------------------------------- | ------ | ------------- |
| if_true_condition                  | String | ‚úÖ             |
| else_condition                     | String | üî¥             |
| if_true_condition_negative_outcome | String | ‚ö†Ô∏è             |
| else_condition_positive_outcome    | String | ‚úÖ             |
| case_true_positive_outcome         | String | ‚úÖ             |
| case_true_negative_outcome         | String | ‚ö†Ô∏è             |
| guard_pass                         | String | ‚òëÔ∏è             |
| guard_fail                         | String | ‚öîÔ∏è             |
| do_try_pass                        | String | ‚úÖ             |
| catch_try_fail                     | String | üé£             |
| value_reporter                     | String | üìã             |
| error_reporter                     | String | ‚òéÔ∏è             |


#### Keys and default values: controlflow_node_type_symbols


| Key                 | Type   | Default value |
| ------------------- | ------ | ------------- |
| if_else_conditional | String | N             |
| switch_case         | String | C             |
| guard               | String | G             |
| do_catch_try        | String | T             |
| value_reporter      | String | R             |
| error_reporter      | String | E             |



#### Keys and default values: function_type_symbols

| Key                       | Type   | Default value |
| ------------------------- | ------ | ------------- |
| initialiser               | String | ‚ôªÔ∏è             |
| custom_function           | String | üèì             |
| system_method_override    | String | üçè             |
| action_method             | String | üéØ             |
| delegate_method           | String | üîÆ             |
| datasource_method         | String | üìÄ             |
| computed_variable         | String | üíª             |
| protocol_extension_method | String | üß©             |


#### Keys and default values: spacers

| Key     | Type | Default value |
| ------- | ---- | ------------- |
| spacer1 | Int  | 0             |
| spacer2 | Int  | 0             |
| spacer3 | Int  | 0             |
| spacer4 | Int  | 0             |




## Topics

### Custom Formatting

- <doc:Choose-symbols-for-semantic-formatting>

